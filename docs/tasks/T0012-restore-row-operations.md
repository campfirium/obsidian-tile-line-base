# T0012-restore-row-operations

## 积木编号
**Building Block 12 / N**

## 目标
恢复表格的行操作功能（添加行、删除行），这些功能在之前的版本中是正常的，但在后续改动中被移除或失效了。

## 背景
- T0009 已实现添加/删除行功能
- 后续某次改动导致这些功能失效
- 需要找出原因并恢复功能

## 问题分析

### 需要调查的方向
1. **工具栏是否还存在？**
   - 检查 `render()` 方法中是否还有工具栏的创建代码
   - 检查工具栏的 DOM 元素是否被渲染

2. **addRow() 和 deleteRow() 方法是否还存在？**
   - 检查这两个方法是否被删除或修改
   - 检查方法实现是否仍然有效

3. **事件绑定是否正常？**
   - 检查按钮的点击事件是否正确绑定
   - 检查 GridAdapter 的 `getSelectedRows()` 方法是否存在

4. **可能的冲突点**
   - T0011 的 header-config-block 功能可能影响了工具栏
   - 表格渲染逻辑的重构可能移除了工具栏

## 功能需求（恢复）

### 1. 工具栏 UI
- 在表格上方有工具栏区域
- 包含以下按钮：
  - **"+ 添加行"** - 在表格末尾添加新行
  - **"- 删除行"** - 删除当前选中的行

### 2. 添加行功能
- 点击"+ 添加行"按钮
- 在表格末尾添加新的数据行
- 新行的 H2 标题默认为 `新条目 {N}`
- 触发保存

### 3. 删除行功能
- 在表格中选中一行
- 点击"- 删除行"按钮
- 从数据中删除对应的行
- 触发保存

## 实施步骤

### 第一步：调查问题
1. 检查当前 `TileLineBaseView` 的 `render()` 方法
2. 检查 `addRow()` 和 `deleteRow()` 方法是否存在
3. 对比 feat/T0009-add-delete-rows 分支的代码差异
4. 找出功能丢失的具体原因

### 第二步：恢复功能
1. 恢复工具栏 UI 代码
2. 恢复或修复 `addRow()` 和 `deleteRow()` 方法
3. 确保事件绑定正确
4. 确保与现有功能（如 header-config-block）兼容

### 第三步：测试验证
1. 测试添加行功能
2. 测试删除行功能
3. 测试与其他功能的兼容性

## 验收标准
1. ✅ 工具栏正常显示，包含"+ 添加行"和"- 删除行"按钮
2. ✅ 点击"+ 添加行"可以在表格末尾添加新行
3. ✅ 选中行后点击"- 删除行"可以删除该行
4. ✅ 添加/删除操作后数据正确保存到文件
5. ✅ 与现有功能（T0011 等）无冲突

## 依赖
- 依赖：T0009（原始实现）、T0011（当前功能）
- 被依赖：后续行操作增强功能

---

**预计工作量**：1-2 小时
**优先级**：高（核心功能恢复）
