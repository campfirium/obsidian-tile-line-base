# TileLineBase 积木式开发路线图

**开发理念：** 每次只增加一个小功能，确保每一步都能理解和掌握

---

## 阶段一：MVP - 终极表格视图 (核心基础)

### 积木 1：Hello Table - 基础视图框架 ✅ 当前
**任务编号：** T0001
**学习目标：** Obsidian 插件基本结构、命令注册、自定义视图创建
**功能描述：**
- 创建插件基本结构（main.ts, manifest.json 等）
- 注册一个命令："打开 TileLineBase 表格"
- 创建一个自定义 View，显示硬编码的假数据表格（3行2列）
- 使用基础 HTML/CSS 渲染表格

**完成标准：**
- [ ] 点击命令后能打开一个新的侧边栏视图
- [ ] 视图中显示一个简单的表格
- [ ] 表格有表头和数据行

---

### 积木 2：读取真实文件
**任务编号：** T0002
**学习目标：** Obsidian 文件 API、文本读取
**功能描述：**
- 让表格视图能打开当前活动的 Markdown 文件
- 将文件内容按行读取为字符串数组
- 在表格中显示原始文本（每行一个单元格，单列）

**完成标准：**
- [ ] 能读取当前打开的文件
- [ ] 将文件内容逐行显示在表格中

---

### 积木 3：解析 H2 块
**任务编号：** T0003
**学习目标：** 数据解析、结构化处理
**功能描述：**
- 识别文件中的 ## H2 标题
- 将文件内容分割为多个"H2 块"
- 在控制台打印解析结果（调试用）

**完成标准：**
- [ ] 能正确识别所有 H2 块
- [ ] 每个块包含标题和段落内容
- [ ] 边界情况处理（文件开头无 H2、连续 H2 等）

---

### 积木 4：提取 Schema（模板）
**任务编号：** T0004
**学习目标：** 数据模型抽象
**功能描述：**
- 从第一个 H2 块提取列定义
- H2 标题 = 第一列名
- 每个段落 = 一列
- 创建 Schema 对象 { columnNames: string[] }

**完成标准：**
- [ ] 能从第一个 H2 提取列名
- [ ] 生成标准的 Schema 对象
- [ ] 在表格视图显示表头

---

### 积木 5：解析记录为表格数据
**任务编号：** T0005
**学习目标：** 数据转换、二维数组构建
**功能描述：**
- 将后续 H2 块（除第一个）解析为数据行
- 根据 Schema 对齐单元格
- 构建二维数组 `string[][]`

**完成标准：**
- [ ] 所有记录正确显示为表格行
- [ ] 单元格与列对齐
- [ ] 空段落显示为空单元格

---

### 积木 6：可编辑单元格
**任务编号：** T0006
**学习目标：** 交互式 UI、事件处理
**功能描述：**
- 让表格单元格可点击编辑
- 使用 `contenteditable` 或 `<input>` 实现
- 编辑后更新内存中的行数组

**完成标准：**
- [ ] 点击单元格进入编辑状态
- [ ] 编辑内容实时更新到内存数组
- [ ] 按 Enter/失焦退出编辑状态

---

### 积木 7：写回文件（核心）
**任务编号：** T0007
**学习目标：** 文件写入、防抖策略、数据持久化
**功能描述：**
- 将内存中的行数组写回文件
- 实现 Debounce (500ms) 防止频繁写入
- 添加写入失败的错误处理

**完成标准：**
- [ ] 编辑后 500ms 自动保存
- [ ] 文件内容正确更新
- [ ] 写入失败时有错误提示

---

### 积木 8：添加/删除行
**任务编号：** T0008
**学习目标：** 数组操作、UI 更新同步
**功能描述：**
- 添加"新增记录"按钮
- 在内存数组中插入新的 H2 块
- 添加"删除行"按钮（每行右侧）

**完成标准：**
- [ ] 点击新增按钮添加空白记录
- [ ] 新记录按 Schema 创建正确的段落结构
- [ ] 删除按钮能移除对应的 H2 块

---

### 积木 9：基础筛选功能
**任务编号：** T0009
**学习目标：** 数据过滤、UI 控件
**功能描述：**
- 为每列添加简单的文本筛选输入框
- 根据输入内容过滤显示的行
- 不修改底层数据

**完成标准：**
- [ ] 输入筛选条件后表格动态过滤
- [ ] 支持多列同时筛选
- [ ] 清空筛选条件恢复全部数据

---

### 积木 10：基础排序功能
**任务编号：** T0010
**学习目标：** 数组排序、点击事件
**功能描述：**
- 点击表头可按该列排序
- 支持升序/降序切换
- 仅影响视图显示，不修改文件顺序

**完成标准：**
- [ ] 点击表头触发排序
- [ ] 再次点击切换升序/降序
- [ ] 排序指示器（箭头图标）

---

### 积木 11：格式校正模式（初级）
**任务编号：** T0011
**学习目标：** 数据验证、异常检测
**功能描述：**
- 检测行数不匹配的记录
- 用高亮标识错位的单元格
- 提供"插入空行"和"删除行"按钮

**完成标准：**
- [ ] 自动检测格式错误
- [ ] 错误单元格有视觉标识
- [ ] 提供修正操作

---

### 积木 12：UI 美化与优化
**任务编号：** T0012
**学习目标：** CSS 样式、用户体验
**功能描述：**
- 优化表格样式（边框、间距、颜色）
- 添加 hover 效果
- 响应式布局
- 添加 loading 状态

**完成标准：**
- [ ] 表格美观易用
- [ ] 交互流畅
- [ ] 大文件加载有 loading 提示

---

## 阶段二：全局索引系统

### 积木 13：文件监听器
**任务编号：** T0013
**功能描述：** 监听所有 Markdown 文件的变化，记录修改时间

---

### 积木 14：增量索引构建
**任务编号：** T0014
**功能描述：** 只对修改过的文件重新索引，构建全局记录索引

---

### 积木 15：全局查询 API
**任务编号：** T0015
**功能描述：** 提供跨文件查询接口，支持筛选和聚合

---

### 积木 16：全局任务视图
**任务编号：** T0016
**功能描述：** 创建一个聚合所有文件任务的全局视图

---

## 阶段三：扩展视图系统

### 积木 17：大纲视图基础
**任务编号：** T0017
**功能描述：** 显示记录的父子关系树形结构

---

### 积木 18：拖拽排序功能
**任务编号：** T0018
**功能描述：** 在大纲视图中通过拖拽调整层级

---

### 积木 19：看板视图基础
**任务编号：** T0019
**功能描述：** 根据"看板"字段值分列显示

---

### 积木 20：看板拖拽更新
**任务编号：** T0020
**功能描述：** 拖拽卡片到不同列自动更新字段值

---

### 积木 21：日历视图基础
**任务编号：** T0021
**功能描述：** 在日历上显示带日期字段的记录

---

## 阶段四：高级功能

### 积木 22：公式列支持
**任务编号：** T0022
**功能描述：** 解析和计算公式列 `= {变量}` 语法

---

### 积木 23：数据范式切换
**任务编号：** T0023
**功能描述：** 实现简洁范式 ↔ 冗余范式的转换

---

### 积木 24：闪卡模式基础
**任务编号：** T0024
**功能描述：** 将 H2 记录转换为闪卡

---

### 积木 25：FSRS 集成
**任务编号：** T0025
**功能描述：** 集成 FSRS 算法进行间隔重复

---

## 阶段五：体验优化

### 积木 26：演示模式
**任务编号：** T0026
**功能描述：** 将 H2 块转换为幻灯片

---

### 积木 27：独立窗口模式
**任务编号：** T0027
**功能描述：** 在新窗口打开视图

---

### 积木 28：AI 交互模式（愿景）
**任务编号：** T0028
**功能描述：** 自然语言查询和操作

---

## 当前进度

**正在进行：** 积木 1 - Hello Table 基础视图框架
**完成数量：** 0 / 28+

---

## 学习路径说明

每个积木都是独立可运行的功能增量：
- ✅ **可以看到效果** - 每次都有直观的 UI 变化
- 📚 **学习新知识** - 每个积木聚焦 1-2 个核心概念
- 🧪 **可以测试** - 完成后立即可用，不依赖后续功能
- 🔄 **迭代改进** - 后续可以回来优化

**建议节奏：**
- 每天 1-2 个积木
- 完成一个积木后休息，消化理解
- 遇到困难可以拆分成更小的步骤
